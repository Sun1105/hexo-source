<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <title>ç™»å½• - MyBlog</title>
  <link rel="stylesheet" href="<%= url_for('/css/login.css') %>">
</head>
<body class="login-page">
  <div class="login-container">
    <h2>ğŸ” ç™»å½• MyBlog</h2>
    <form id="loginForm">
      <input type="text" id="username" placeholder="ç”¨æˆ·å" required>
      <input type="password" id="password" placeholder="å¯†ç " required>
      <button type="submit">ç™»å½•</button>
    </form>
    <p id="message" class="message"></p>
  </div>

  <script>
    // å·²ç™»å½•ç”¨æˆ·è‡ªåŠ¨è·³è½¬ä¸»é¡µ
    if (localStorage.getItem("isLoggedIn") === "true") {
      window.location.href = "/";
    }

    const form = document.getElementById("loginForm");
    const msg = document.getElementById("message");

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();

      // ç®€å•æ¨¡æ‹Ÿç™»å½•éªŒè¯
      if (username === "admin" && password === "123456") {
        msg.textContent = "ç™»å½•æˆåŠŸï¼Œæ­£åœ¨è·³è½¬...";
        msg.className = "message success";

        // å­˜å‚¨ç™»å½•æ ‡è®°
        localStorage.setItem("isLoggedIn", "true");

        // ç¡®ä¿æµè§ˆå™¨å…ˆå†™å…¥ localStorage å†è·³è½¬
        setTimeout(() => {
          document.body.classList.add("fade-out");

          // ä½¿ç”¨ replace é¿å…å›é€€åˆ°ç™»å½•é¡µ
          setTimeout(() => {
            window.location.replace("/"); // âœ… ç”¨ replace æ¯” href æ›´ç¨³å®š
          }, 600);
        }, 500);
      } else {
              msg.textContent = "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•ã€‚";
              msg.className = "message error";
            }
    });
  </script>
</body>
</html>
