<section class="main-section">   
  <!-- ============================
       åœ¨çº¿ç¬”è®°ç³»ç»Ÿæ¨¡å—
       åŠŸèƒ½ï¼š
         - åˆ—å‡ºå·²æœ‰æ–‡ç« 
         - æ–°å»ºæ–‡ç« 
         - ç¼–è¾‘æ–‡ç« ï¼ˆæ ‡é¢˜ã€åˆ†ç±»ã€æ ‡ç­¾ã€å†…å®¹ï¼‰
         - å®æ—¶ Markdown é¢„è§ˆ
         - ä¿å­˜åˆ° GitHub ä»“åº“ï¼Œè§¦å‘ Vercel è‡ªåŠ¨éƒ¨ç½²
  ============================ -->
  <h1 style="text-align:center;">ğŸ“’ åœ¨çº¿ç¬”è®°ç³»ç»Ÿ</h1>

  <div style="max-width:1000px; margin:20px auto;">
    <!-- æ–°å»ºæ–‡ç« æŒ‰é’® -->
    <button id="newNoteBtn" style="padding:10px 15px; background:#0078d7; color:#fff; border:none; border-radius:5px; cursor:pointer;">ğŸ“ æ–°å»ºæ–‡ç« </button>

    <!-- æ–‡ç« åˆ—è¡¨å®¹å™¨ -->
    <div id="noteList" style="margin-top:20px;"></div>
  </div>

  <script>
  const owner = "Sun1105";              // æ›¿æ¢æˆä½ çš„ GitHub ç”¨æˆ·å
  const repo = "hexo-source";           // æ›¿æ¢æˆä½ çš„ä»“åº“å
  const postsDir = "source/_posts";     // Hexo æ–‡ç« ç›®å½•

  const noteListDiv = document.getElementById('noteList');

  // ========================
  // 1ï¸âƒ£ åˆ—å‡ºæ–‡ç« åˆ—è¡¨
  // ========================
  async function loadNotes() {
    noteListDiv.innerHTML = "åŠ è½½ä¸­...";
    try {
      const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${postsDir}`);
      const data = await res.json();
      if(res.ok){
        noteListDiv.innerHTML = "";
        data.forEach(file => {
        if(file.name.endsWith(".md")){
          const div = document.createElement('div');
          div.className = "note-item";

          // å·¦ä¾§ï¼šå›¾æ ‡ + æ–‡ä»¶å
          const left = document.createElement('div');
          left.style.display = "flex";
          left.style.alignItems = "center";

          const icon = document.createElement('span');
          icon.className = "note-icon";
          icon.textContent = "ğŸ“„";

          const title = document.createElement('span');
          title.className = "note-title";
          title.textContent = file.name;

          left.appendChild(icon);
          left.appendChild(title);

          // å³ä¾§ï¼šé™„åŠ ä¿¡æ¯ï¼ˆæ¯”å¦‚æ›´æ–°æ—¶é—´ï¼‰
          const meta = document.createElement('span');
          meta.className = "note-meta";
          meta.textContent = (file.size / 1024).toFixed(1) + " KB";

          div.appendChild(left);
          div.appendChild(meta);

          // ä½¿ç”¨å…¨å±€ openEditor å‡½æ•°
          div.addEventListener('click', () => {
             if (window.openEditor) {
                window.openEditor(file);
             } else {
                alert('Editor component not loaded.');
             }
          });
          noteListDiv.appendChild(div);
        }
        });
      } else {
        noteListDiv.innerHTML = "âŒ è·å–æ–‡ç« åˆ—è¡¨å¤±è´¥ï¼š" + JSON.stringify(data);
      }
    } catch(err){
      noteListDiv.innerHTML = "âŒ ç½‘ç»œé”™è¯¯ï¼š" + err.message;
    }
  }

  // ========================
  // 2ï¸âƒ£ æ–°å»ºæ–‡ç« 
  // ========================
  document.getElementById('newNoteBtn').addEventListener('click', () => {
      if (window.openEditor) {
          window.openEditor(null);
      } else {
          alert('Editor component not loaded.');
      }
  });

  // ========================
  // 3ï¸âƒ£ åˆå§‹åŒ–åŠ è½½æ–‡ç« åˆ—è¡¨
  // ========================
  loadNotes();
  // æš´éœ² loadNotes ç»™å…¨å±€ï¼Œä»¥ä¾¿ä¿å­˜ååˆ·æ–°
  window.loadNotes = loadNotes;
  </script>
  <style>
    /* æ–‡ä»¶åˆ—è¡¨æ•´ä½“å®¹å™¨ */
    #noteList {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* å•ä¸ªæ–‡ç« é¡¹ */
    .note-item {
      padding: 12px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 6px;
      background: #fafafa;
      transition: all 0.2s ease;
      font-family: "Segoe UI", sans-serif;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    /* é¼ æ ‡æ‚¬åœæ•ˆæœ */
    .note-item:hover {
      background: #f0f8ff;
      border-color: #0078d7;
      transform: translateY(-2px);
      cursor: pointer;
    }

    /* æ–‡ä»¶å */
    .note-title {
      font-weight: 600;
      color: #333;
    }

    /* æ–‡ä»¶å›¾æ ‡ */
    .note-icon {
      margin-right: 8px;
      color: #0078d7;
    }

    /* æ—¶é—´æˆ³æˆ–é™„åŠ ä¿¡æ¯ */
    .note-meta {
      font-size: 12px;
      color: #666;
    }
  </style>
</section>
