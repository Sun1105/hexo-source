---
title: 轻量版 Web API
date: 2026-02-19T12:05:13.016Z
categories: [TOOL]
tags: [API请求]
---

<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Tester (Lite)</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        body { background-color: #0f1117; }
        .scroll::-webkit-scrollbar { width: 8px; }
        .scroll::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 6px; }
    </style>
</head>

<body class="text-gray-200">
<div class="max-w-4xl mx-auto p-6">

    <h1 class="text-2xl font-bold mb-4 text-indigo-400">Web API Tester (Lite)</h1>

    <div class="bg-gray-800 p-4 rounded-xl border border-gray-700 mb-6">
        <div class="flex space-x-3">
            <select id="method" class="w-28 bg-gray-700 border border-gray-600 text-white text-sm rounded-lg p-2">
                <option>GET</option><option>POST</option>
                <option>PUT</option><option>DELETE</option>
                <option>PATCH</option>
            </select>

            <input id="url" type="text"
                   class="flex-grow bg-gray-700 border border-gray-600 text-white rounded-lg p-2"
                   placeholder="输入 URL">

            <button id="send" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 rounded-lg">
                发送
            </button>
        </div>
    </div>

    <div class="bg-gray-800 p-4 rounded-xl border border-gray-700 mb-6">
        <textarea id="body" rows="6"
                  class="w-full bg-gray-900 border border-gray-700 text-gray-200 rounded-lg p-3 font-mono text-sm"
                  placeholder="请求 Body（可选）"></textarea>
    </div>

    <div class="bg-gray-800 p-4 rounded-xl border border-gray-700 mb-6">
        <div id="headers" class="space-y-2"></div>
        <button id="add-header" class="mt-3 text-indigo-400 text-sm">➕ 添加 Header</button>
    </div>

    <div class="bg-gray-800 p-4 rounded-xl border border-gray-700 mb-6">
        <div class="flex space-x-6 text-sm mb-3">
            <p>状态: <span id="code" class="font-bold text-lg text-yellow-500">N/A</span></p>
            <p>耗时: <span id="time" class="font-bold">0ms</span></p>
        </div>

        <pre class="scroll max-h-96 p-3 bg-gray-900 rounded-lg border border-gray-700">
<code id="resp" class="json"></code>
        </pre>
    </div>

    <div id="err" class="hidden mt-4 p-3 bg-red-700 rounded-lg text-white font-medium">
        请求失败。
    </div>
</div>

<script>
function addHeaderRow(k = "", v = "") {
    const row = document.createElement("div");
    row.className = "flex space-x-2";
    row.innerHTML = `
        <input class="flex-1 bg-gray-900 border border-gray-700 text-gray-200 rounded-lg p-2 text-sm k" placeholder="Key" value="${k}">
        <input class="flex-1 bg-gray-900 border border-gray-700 text-gray-200 rounded-lg p-2 text-sm v" placeholder="Value" value="${v}">
        <button class="text-red-500 px-2">&times;</button>
    `;
    row.querySelector("button").onclick = () => row.remove();
    document.getElementById("headers").appendChild(row);
}

addHeaderRow("Content-Type", "application/json");
addHeaderRow();

document.getElementById("add-header").onclick = () => addHeaderRow();

const PROXY = "http://localhost:3000/proxy";

document.getElementById("send").onclick = async () => {
    const url = document.getElementById("url").value.trim();
    const method = document.getElementById("method").value;
    const bodyText = document.getElementById("body").value.trim();

    const code = document.getElementById("code");
    const time = document.getElementById("time");
    const resp = document.getElementById("resp");
    const errBox = document.getElementById("err");

    errBox.classList.add("hidden");
    code.textContent = "...";
    resp.textContent = "";

    const start = performance.now();

    const headers = {};
    document.querySelectorAll("#headers .k").forEach((k, i) => {
        const kk = k.value.trim();
        const vv = document.querySelectorAll("#headers .v")[i].value.trim();
        if (kk) headers[kk] = vv;
    });

    let bodyData = undefined;
    if (["POST", "PUT", "PATCH"].includes(method) && bodyText) {
        try { bodyData = JSON.parse(bodyText); }
        catch { bodyData = bodyText; }
    }

    try {
        const res = await fetch(PROXY, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ url, method, headers, body: bodyData })
        });

        const end = performance.now();
        time.textContent = `${(end - start).toFixed(0)}ms`;

        code.textContent = res.status;
        code.className = res.ok ? "text-green-400 font-bold" : "text-red-400 font-bold";

        let text = await res.text();
        try {
            text = JSON.stringify(JSON.parse(text), null, 2);
            resp.className = "json";
        } catch {
            resp.className = "plaintext";
        }

        resp.textContent = text;
        hljs.highlightElement(resp);

    } catch (e) {
        errBox.classList.remove("hidden");
        code.textContent = "ERR";
        resp.textContent = e.message;
    }
};
</script>

</body>
</html>