---
title: ğŸ“ Mapper SQL æ‰§è¡Œåˆ°æ—¥å¿—è¾“å‡ºæµç¨‹å›¾
category: Mybatis
tags: [log, mapper, æµç¨‹å›¾]
date: 2025-11-27T14:13:25.882Z
---

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>MyBatis SQL æ‰§è¡Œæµç¨‹å›¾</title>

  <!-- Mermaid JS -->
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>

  <style>
    body {
      font-family: "Segoe UI", "Microsoft YaHei", sans-serif;
      margin: 40px;
      background-color: #f9f9f9;
      line-height: 1.8;
    }
    h1, h2 {
      color: #2c3e50;
    }
    .mermaid {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }
    code {
      background: #eee;
      padding: 2px 6px;
      border-radius: 4px;
    }
    pre {
      background: #eee;
      padding: 12px;
      border-radius: 6px;
      overflow-x: auto;
    }
  </style>
</head>

<body>

  <h1>MyBatis SQL æ‰§è¡Œæµç¨‹ï¼ˆå¯è§†åŒ–ç‰ˆï¼‰</h1>

  <h2>ğŸ“Œ æµç¨‹å›¾ï¼ˆMermaid æ¸²æŸ“ï¼‰</h2>

sequenceDiagram
    autonumber

    participant Caller as è°ƒç”¨æ–¹ï¼ˆController/Serviceï¼‰
    participant Mapper as Mapper æ¥å£
    participant Executor as Executor æ‰§è¡Œå™¨
    participant SQLGen as SQL æ¨¡æ¿ç”Ÿæˆå™¨
    participant Param as å‚æ•°ç»‘å®šå™¨ï¼ˆParameterHandlerï¼‰
    participant JDBC as JDBC å±‚
    participant Result as ç»“æœå¤„ç†å™¨ï¼ˆResultSetHandlerï¼‰

    Caller ->> Mapper: è°ƒç”¨ Mapper æ–¹æ³•
    Mapper ->> Executor: è¿›å…¥ MyBatis æ‰§è¡Œæµç¨‹

    Executor ->> SQLGen: ç”Ÿæˆ SQL æ¨¡æ¿ï¼ˆå¸¦ ? å ä½ç¬¦ï¼‰
    SQLGen -->> Executor: è¿”å› Prepared SQL

    Executor ->> Executor: æ—¥å¿—é˜¶æ®µ 1\nPreparing: SELECT ... WHERE ... = ?

    Executor ->> Param: ç»‘å®šæ–¹æ³•å‚æ•°åˆ° ?
    Param -->> Executor: è¿”å›ç»‘å®šåçš„å‚æ•°

    Executor ->> Executor: æ—¥å¿—é˜¶æ®µ 2\nParameters: 300000000, 20250601

    Executor ->> JDBC: æ‰§è¡Œ SQL\nexecuteQuery / executeUpdate
    JDBC -->> Executor: è¿”å›ç»“æœé›†æˆ–å½±å“è¡Œæ•°

    Executor ->> Executor: æ—¥å¿—é˜¶æ®µ 3\nTotal = 1

    Executor ->> Result: æ˜ å°„ç»“æœä¸º Java å¯¹è±¡
    Result -->> Caller: è¿”å›æœ€ç»ˆç»“æœ


  <h2>ğŸ“˜ è¯¦ç»†æ­¥éª¤è¯´æ˜</h2>

  <h3>1. è°ƒç”¨ Mapper æ–¹æ³•</h3>
  <p>ç”¨æˆ·é€šè¿‡ Mapper æ¥å£è°ƒç”¨å¯¹åº”æ–¹æ³•ã€‚</p>

  <h3>2. MyBatis Executor æ ¸å¿ƒæ‰§è¡Œå™¨</h3>
  <p>MyBatis æ ¸å¿ƒæ‰§è¡Œå™¨è´Ÿè´£æ•´ä¸ª SQL æ‰§è¡Œæµç¨‹ã€‚</p>

  <h3>3. ç”Ÿæˆ SQL è¯­å¥æ¨¡æ¿</h3>
  <p>æ ¹æ® Mapper XML æˆ–æ³¨è§£ç”Ÿæˆå¸¦ <code>?</code> å ä½ç¬¦çš„ SQLã€‚</p>

  <h3>4. æ—¥å¿—æ‰“å°é˜¶æ®µ 1: Preparing</h3>
  <pre>
==> Preparing: SELECT ... WHERE ... = ?
  </pre>

  <h3>5. å‚æ•°ç»‘å®š</h3>
  <p>å°†æ–¹æ³•å‚æ•°ç»‘å®šåˆ° SQL ä¸­çš„ <code>?</code> å ä½ç¬¦ã€‚</p>

  <h3>6. æ—¥å¿—æ‰“å°é˜¶æ®µ 2: Parameters</h3>
  <pre>
==> Parameters: 300000000 (String), 20250601 (String)
  </pre>

  <h3>7. æ‰§è¡Œ SQL</h3>
  <p>é€šè¿‡ JDBC è°ƒç”¨ï¼š</p>
  <ul>
    <li>Connection</li>
    <li>PreparedStatement</li>
    <li>executeQuery() / executeUpdate()</li>
  </ul>

  <h3>8. è·å–æ‰§è¡Œç»“æœ</h3>
  <ul>
    <li><strong>SELECT</strong> â†’ è¿”å›ç»“æœé›†</li>
    <li><strong>UPDATE / INSERT</strong> â†’ è¿”å›å½±å“è¡Œæ•°</li>
  </ul>

  <h3>9. æ—¥å¿—æ‰“å°é˜¶æ®µ 3: æ‰§è¡Œç»“æœ</h3>
  <pre>
<== Total: 1
  </pre>

  <h3>10. è¿”å› Mapper æ–¹æ³•ç»“æœ</h3>
  <p>å°†ç»“æœè¿”å›ç»™è°ƒç”¨æ–¹ã€‚</p>

</body>
</html>


âœ… è¯¥ Markdown æ–‡ä»¶æ”¯æŒ **Mermaid æµç¨‹å›¾æ¸²æŸ“**ï¼Œå¯ç›´æ¥ç”¨äº GitHub README æˆ–æŠ€æœ¯æ–‡æ¡£ã€‚
