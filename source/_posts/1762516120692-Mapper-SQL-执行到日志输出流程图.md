---
title: ğŸ“ Mapper SQL æ‰§è¡Œåˆ°æ—¥å¿—è¾“å‡ºæµç¨‹å›¾
category: Mybatis
tags: [log, mapper, æµç¨‹å›¾]
date: 2025-11-27T13:39:12.440Z
---

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>MyBatis SQL æ‰§è¡Œæµç¨‹ï¼ˆåŸ¹è®­ç‰ˆï¼‰</title>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ startOnLoad: true });
  </script>
  <style>
    body {
      font-family: "Segoe UI", "Microsoft YaHei", sans-serif;
      margin: 40px;
      background-color: #f9f9f9;
      line-height: 1.8;
    }
    h1, h2 {
      color: #2c3e50;
    }
    .mermaid {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 40px;
    }
    code {
      background: #eee;
      padding: 2px 6px;
      border-radius: 4px;
    }
    pre {
      background: #eee;
      padding: 12px;
      border-radius: 6px;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 40px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 12px;
      vertical-align: top;
    }
    th {
      background-color: #eee;
    }
  </style>
</head>
<body>

  <h1>MyBatis SQL æ‰§è¡Œæµç¨‹ï¼ˆå¯è§†åŒ–ç‰ˆï¼‰</h1>

  <h2>ğŸ“Œ æµç¨‹å›¾ï¼ˆMermaid æ¸²æŸ“ï¼‰</h2>
  <div class="mermaid">
flowchart TD
    A[è°ƒç”¨ Mapper æ–¹æ³•] --> B[MyBatis Executor\næ ¸å¿ƒæ‰§è¡Œå™¨]
    B --> C[ç”Ÿæˆ SQL æ¨¡æ¿\n(å¸¦ ? å ä½ç¬¦)]
    C --> D[æ—¥å¿—é˜¶æ®µ 1\nPreparing: SELECT ... WHERE ... = ?]
    D --> E[å‚æ•°ç»‘å®š\nç»‘å®šæ–¹æ³•å‚æ•°åˆ° ?]
    E --> F[æ—¥å¿—é˜¶æ®µ 2\nParameters: 300000000, 20250601]
    F --> G[æ‰§è¡Œ SQL\nJDBC è°ƒç”¨ executeQuery/Update]
    G --> H[è·å–æ‰§è¡Œç»“æœ\nSELECT â†’ ç»“æœé›†\nUPDATE â†’ è¡Œæ•°]
    H --> I[æ—¥å¿—é˜¶æ®µ 3\nTotal: 1]
    I --> J[è¿”å› Mapper æ–¹æ³•ç»“æœ]
  </div>

  <h2>ğŸ“˜ æ‰§è¡Œæµç¨‹ 10 æ­¥è¯¦è§£</h2>
  <ol>
    <li><strong>è°ƒç”¨ Mapper æ–¹æ³•ï¼š</strong> ç”¨æˆ·é€šè¿‡æ¥å£è°ƒç”¨æ–¹æ³•ï¼ŒMyBatis é€šè¿‡åŠ¨æ€ä»£ç†ç”Ÿæˆå®ç°ç±»ã€‚</li>
    <li><strong>Executor æ‰§è¡Œå™¨ï¼š</strong> æ§åˆ¶æ•´ä¸ª SQL æ‰§è¡Œæµç¨‹ã€‚</li>
    <li><strong>ç”Ÿæˆ SQL æ¨¡æ¿ï¼š</strong> ä» XML æˆ–æ³¨è§£ç”Ÿæˆå¸¦ <code>?</code> çš„ SQLã€‚</li>
    <li><strong>æ—¥å¿—é˜¶æ®µ 1ï¼š</strong> è¾“å‡º SQL æ¨¡æ¿æ—¥å¿—ï¼š
      <pre>==> Preparing: SELECT ... WHERE ... = ?</pre>
    </li>
    <li><strong>å‚æ•°ç»‘å®šï¼š</strong> ParameterHandler å°†å‚æ•°ç»‘å®šåˆ° <code>?</code>ã€‚</li>
    <li><strong>æ—¥å¿—é˜¶æ®µ 2ï¼š</strong> è¾“å‡ºç»‘å®šå‚æ•°æ—¥å¿—ï¼š
      <pre>==> Parameters: 300000000 (String), 20250601 (String)</pre>
    </li>
    <li><strong>æ‰§è¡Œ SQLï¼š</strong> JDBC è°ƒç”¨ Connection â†’ PreparedStatement â†’ executeQuery/Updateã€‚</li>
    <li><strong>è·å–æ‰§è¡Œç»“æœï¼š</strong> SELECT è¿”å›ç»“æœé›†ï¼ŒUPDATE/INSERT è¿”å›å½±å“è¡Œæ•°ã€‚</li>
    <li><strong>æ—¥å¿—é˜¶æ®µ 3ï¼š</strong> è¾“å‡ºæ‰§è¡Œç»“æœæ—¥å¿—ï¼š
      <pre><== Total: 1</pre>
    </li>
    <li><strong>è¿”å›ç»“æœï¼š</strong> ResultSetHandler æ˜ å°„ç»“æœå¹¶è¿”å›ã€‚</li>
  </ol>

  <h2>ğŸ” MyBatis æ ¸å¿ƒç»„ä»¶è§£æ</h2>
  <table>
    <tr><th>ç»„ä»¶</th><th>ä½œç”¨</th></tr>
    <tr><td>Executor</td><td>æ§åˆ¶ SQL æ‰§è¡Œæµç¨‹</td></tr>
    <tr><td>StatementHandler</td><td>åˆ›å»º Statementï¼Œæ‰§è¡Œ SQL</td></tr>
    <tr><td>ParameterHandler</td><td>ç»‘å®šå‚æ•°åˆ° SQL</td></tr>
    <tr><td>ResultSetHandler</td><td>å¤„ç†æŸ¥è¯¢ç»“æœ</td></tr>
    <tr><td>MappedStatement</td><td>ä¿å­˜ SQLã€å‚æ•°ã€è¿”å›ç±»å‹ç­‰ä¿¡æ¯</td></tr>
    <tr><td>SqlSource</td><td>ç”Ÿæˆ SQL æ¨¡æ¿</td></tr>
    <tr><td>BoundSql</td><td>æœ€ç»ˆ SQL + å‚æ•°</td></tr>
  </table>

  <h2>ğŸ§  æ—¥å¿—è§£è¯»æŠ€å·§</h2>
  <ul>
    <li><strong>Preparingï¼š</strong> æ£€æŸ¥ SQL æ¨¡æ¿æ˜¯å¦æ­£ç¡®</li>
    <li><strong>Parametersï¼š</strong> æ£€æŸ¥å‚æ•°æ˜¯å¦æ­£ç¡®ç»‘å®š</li>
    <li><strong>Totalï¼š</strong> æ£€æŸ¥æ‰§è¡Œç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
  </ul>

  <h2>â“ å¸¸è§é—®é¢˜ FAQ</h2>
  <ul>
    <li>ä¸ºä»€ä¹ˆæ—¥å¿—é‡Œçœ‹ä¸åˆ°å®Œæ•´ SQLï¼Ÿ â†’ å› ä¸ºä½¿ç”¨äº† PreparedStatement</li>
    <li>å¦‚ä½•æ‰“å°å®Œæ•´ SQLï¼Ÿ â†’ ä½¿ç”¨ p6spy æˆ–è‡ªå®šä¹‰æ‹¦æˆªå™¨</li>
    <li>å‚æ•°ä¸º null çš„åŸå› ï¼Ÿ â†’ å‚æ•°åæœªè¯†åˆ«ã€æ³¨è§£ç¼ºå¤±ã€åŠ¨æ€ SQL æ¡ä»¶æœªå‘½ä¸­</li>
  </ul>

  <h2>ğŸ› ï¸ SQL æ’æŸ¥æ­¥éª¤</h2>
  <ol>
    <li>æŸ¥çœ‹ Preparing â†’ SQL æ˜¯å¦æ­£ç¡®</li>
    <li>æŸ¥çœ‹ Parameters â†’ å‚æ•°æ˜¯å¦æ­£ç¡®</li>
    <li>æ‰‹åŠ¨æ‹¼æ¥ SQL + å‚æ•° â†’ åœ¨ DB æ‰§è¡Œ</li>
    <li>æŸ¥çœ‹ Total â†’ æ˜¯å¦ç¬¦åˆé¢„æœŸ</li>
    <li>æ£€æŸ¥ XML / æ³¨è§£ / ResultMap</li>
    <li>å¼€å¯ MyBatis debug æ—¥å¿—</li>
  </ol>

  <h2>âœ… æœ€ä½³å®è·µ</h2>
  <ul>
    <li>ä½¿ç”¨ <code>@Param</code> æ˜ç¡®å‚æ•°å</li>
    <li>é¿å…åœ¨ XML ä¸­å†™å¤æ‚é€»è¾‘</li>
    <li>ä½¿ç”¨ ResultMap ä»£æ›¿è‡ªåŠ¨æ˜ å°„</li>
    <li>å¼€å¯ MyBatis æ—¥å¿—ï¼ˆdebugï¼‰</li>
    <li>ä½¿ç”¨ p6spy æ‰“å°å®Œæ•´ SQL</li>
    <li>ä¿æŒ Mapper æ–¹æ³•å•ä¸€èŒè´£</li>
  </ul>

</body>
</html>
